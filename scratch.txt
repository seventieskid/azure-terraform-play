az group create \
--location westeurope \
--name azuron-vmssagents

# Support request out for Standard_B2pts_v2 50 x cheaper than

az vmss create \
--name azuron-vmssagents-pool \
--resource-group azuron-vmssagents \
--image Ubuntu2204 \
--authentication-type SSH \
--admin-username grees \
--generate-ssh-keys \
--instance-count 1 \
--disable-overprovision \
--upgrade-policy-mode manual \
--single-placement-group false \
--platform-fault-domain-count 1 \
--load-balancer "" \
--custom-data /Users/garethrees/gitrepos/azure-terraform-play/cloud-config.yml \
--orchestration-mode Uniform

# Defaults to Standard_DS1_v2 0.0136 USD per hour


az vm list-skus --location westeurope --all --output table


# With public IP

az group create \
--location westeurope \
--name azuron-devops-agents

az vmss create \
  --name azuron-devops-agents-pool \
  --resource-group azuron-devops-agents \
  --image Ubuntu2204 \
  --custom-data /Users/garethrees/gitrepos/azure-terraform-play/cloud-config.yml \
  --admin-username azuron \
  --authentication-type SSH \
  --generate-ssh-keys \
  --instance-count 1 \
  --disable-overprovision \
  --upgrade-policy-mode manual \
  --single-placement-group false \
  --platform-fault-domain-count 1 \
  --orchestration-mode Uniform

ssh azuron@4.180.42.9 -p 50000

az group delete --name azuron-devops-agents